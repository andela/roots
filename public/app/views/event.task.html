<div id="preview" class="switch-container" data-ng-init="services()">
  <div layout="column">
    <md-toolbar md-scroll-shrink id="contentMainDiv">
      <img ng-src="{{event.imageUrl}}" height='500px' width='100%' />
    </md-toolbar>
    <link rel="stylesheet" href="../../libs/bootstrap/dist/css/bootstrap.min.css" />
    <div>
      <md-card>
        <div layout="column" class="md-raised">
          <div id="padding">
            <div layout="row">
              <div class="md-warn" id="eventTitleDiv">
                <h3 class="md-flex">{{event.name}}</h3>
              </div>
            </div>
            <md-content flex layout-padding>
              <div class="taskbox" layout="row" layout-sm="column">
                <div class="task-div">
                  <h4><b>Manage Tasks</b></h4>
                  <h5>Tasks</h5>
                  <div flex class="tasks">
                    <li flex layout="column" layout-padding ng-repeat="task in tasks">
                      <div layout>
                        <div flex="15" layout="column">
                          <md-title><b>Managed By</b></md-title>
                          <span>{{task.firstname | uppercase}} {{task.lastname | uppercase}} </span>
                          <md-title><b>Email</b></md-title>
                          <span>{{task.email}}</span>
                        </div>                       
                        <div flex="20" layout="column">
                          <md-title><b>Department</b></md-title>
                          <input type="text" ng-model="task.description">
                        </div>
                        <div flex="15" layout="column">
                          <md-title><b>Status</b></md-title>
                          <md-checkbox ng-checked="task.completed" ng-click="task.completed = !task.completed">
                            Completed
                          </md-checkbox>
                        </div>
                        <div class="dropdown" layout="column" flex="20">
                          <md-title><b>Start Date</b></md-title>
                          <a class="dropdown-toggle" id="dropdown4" role="button" data-toggle="dropdown">
                            <div class="input-group">
                              <input type="text" class="form-control" data-ng-model="task.startDate"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                            </div>
                          </a>
                          <ul class="dropdown-menu" role="menu">
                            <datetimepicker data-ng-model="task.startDate" data-datetimepicker-config="{ dropdownSelector: '#dropdown4' }" />
                          </ul>
                        </div>
                        <div class="dropdown" layout="column" flex="20">
                          <md-title><b>End Date</b></md-title>
                          <a class="dropdown-toggle" id="dropdown5" role="button" data-toggle="dropdown">
                            <div class="input-group">
                              <input type="text" class="form-control" data-ng-model="task.endDate"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                            </div>
                          </a>
                          <ul class="dropdown-menu" role="menu">
                            <datetimepicker data-ng-model="task.endDate" data-datetimepicker-config="{ dropdownSelector: '#dropdown5' }" />
                          </ul>
                        </div>
                        <md-button class="md-fab md-mini" title="Delete task" ng-click="deleteTask(task._id)">-</md-button>
                        <md-button class="md-fab md-mini" ng-if="task.description && task.endDate &&task.startDate" title="Edit task" ng-click="editTask(task)">âœ”</md-button>
                      </div>
                    </li>
                  </div>
                  <h5>Add new task</h5>
                  <div flex layout class="taskbox" layout-padding ng-if="newTask.firstname">       
                    <div flex="15" layout="column">
                      <md-title><b>Managed By</b></md-title>
                      <span>{{newTask.firstname | uppercase}} {{newTask.lastname | uppercase}} </span>
                      <md-title><b>Email</b></md-title>
                      <span>{{newTask.email}}</span>
                    </div>                   
                    <div flex="25" layout="column">
                      <md-title><b>Department</b><span class="req">*</span></md-title>
                      <input type="text" ng-model="newTask.description">
                    </div>
                    <div class="dropdown" layout="column" flex="25">
                      <md-title><b>Start Date</b><span class="req">*</span></md-title>
                      <a class="dropdown-toggle" id="dropdown2" role="button" data-toggle="dropdown">
                        <div class="input-group">
                          <input type="text" class="form-control" data-ng-model="newTask.startDate"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                      </a>
                      <ul class="dropdown-menu" role="menu">
                        <datetimepicker data-ng-model="newTask.startDate" data-datetimepicker-config="{ dropdownSelector: '#dropdown2' }" />
                      </ul>
                    </div>
                    <div class="dropdown" layout="column" flex="25">
                      <md-title><b>End Date</b><span class="req">*</span></md-title>
                      <a class="dropdown-toggle" id="dropdown3" role="button" data-toggle="dropdown">
                        <div class="input-group">
                          <input type="text" class="form-control" data-ng-model="newTask.endDate"><span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                        </div>
                      </a>
                      <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                        <datetimepicker data-ng-model="newTask.endDate" data-datetimepicker-config="{ dropdownSelector: '#dropdown3' }" />
                      </ul>
                    </div>
                    <md-button class="md-fab md-mini" title="Add team member" ng-if="newTask.description && newTask.endDate && newTask.startDate" ng-click="addTask()">+</md-button>
                  </div>
                  <div layout flex class="user-autocomplete">
                    <md-autocomplete ng-disabled="false" md-no-cache="false" md-selected-item="selectedItem" md-search-text-change="searchTextChange(searchText)" md-search-text="searchText" md-selected-item-change="selectedUserChange(user)" md-items="user in querySearch(searchText)" md-item-text="user.email" md-min-length="0" placeholder="{{searchLabel}}" md-menu-class="autocomplete-custom-template" flex="60">
                      <md-item-template>
                        <span class="item-title">
                      <img ng-src="{{user.profilePic}}" class="profile-icon">
                      <span> {{user.email}} </span>
                        </span>
                        <span class="item-metadata">
                      <span class="item-metastat">
                        <strong>{{user.firstname | uppercase}}</strong>
                      </span>
                        <span class="item-metastat">
                        <strong>{{user.lastname | uppercase}}</strong>
                      </span>
                        </span>
                      </md-item-template>
                    </md-autocomplete>
                  </div>
                </div>
              </div>
            </md-content>
          </div>
        </div>
      </md-card>
    </div>
  </div>
  <section layout="row" layout-sm="column" layout-align="center center" layout-wrap>
    <md-button class="md-raised" type="submit" ng-click="viewEvent();">Back</md-button>
  </section>
  <div class="md-toolbar-tools centre" layout-align="center">
    <md-button class="md-raised" ui-sref="user.moreEvents">More Events...</md-button>
  </div>
</div>
